

<%= form_for @listing do |f| %>
    <% if @listing.errors.any? %>
    <div id="error_explanation">
      <h2 class="alert">
        <%= pluralize(@listing.errors.count, "error") %> prohibited this listing from being saved:
      </h2>

      <ul>
      <% @listing.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


    <p>
        <%= f.label :title, "Title" %>
        <%= f.text_field :title %>
    </p>

    <p>
        <%= f.label :description, "Description" %>
        <%= f.text_area :description %>
    </p>

    <p>
        <%= f.label :price, "Price/night" %>
        <%= f.number_field :price %>
    </p>

    <p>
        <%= f.label :bedroom, "Number of Bedrooms" %>
        <%= f.text_field :bedroom %>
    </p>
    
    <p>
        <%= f.label :bathroom, "Number of Bathrooms" %>
        <%= f.text_field :bathroom %>
    </p>
    
    <p>
        <%= f.label :address, "Street Address" %>
        <%= f.text_field :address %>
    </p>
    
    <p>
        <%= f.label :city, "City" %>
        <%= f.text_field :city %>
    </p>
    
    <p>
        <%= f.label :state, "State" %>
        <%= f.text_field :state %>
    </p>

    <p>
        <%= f.label :img, "Image URL" %>
        <%= f.text_field :img %>
    </p>

    <p>
        <%= f.label :category_id, "Category" %>
        <%= f.collection_select :category_id, Category.all, :id, :name, :include_blank => true %>

        or create a new category here: 

        <%= f.fields_for :category do |cat_fields| %>
            <%= cat_fields.label :name %>
            <%= cat_fields.text_field :name %>
        <% end %>
    </p>

    <p>
        <%= f.submit @listing.persisted? ? 'Update Listing' : 'Create Listing' %>
    </p>

<% end %>